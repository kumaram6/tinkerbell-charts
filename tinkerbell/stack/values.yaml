stack:
  enabled: true
  name: tink-stack
  service:
    enabled: true
    type: LoadBalancer
  selector:
    app: tink-stack
  # &publicIP is a YAML anchor. It allows us to define a value once and reference it multiple times.
  # https://helm.sh/docs/chart_template_guide/yaml_techniques/#yaml-anchors
  loadBalancerIP: &publicIP 172.22.32.200
  lbClass: kube-vip.io/kube-vip-class
  # Once the Kubernetes Gateway API is more stable, we will use that for all services instead of nginx.
  image: nginx:1.25.1
  hook:
    enabled: true
    name: hook-files
    port: 8080
    image: ubuntu:22.04
    downloadsDest: /opt/hook
    # downloadURL only works with the > 0.8.1 Hook release because
    # previous Hook versions didn't provide a checksum file.
    downloadURL: https://github.com/tinkerbell/hook/releases/download/latest
  kubevip:
    enabled: true
    name: kube-vip
    image: ghcr.io/kube-vip/kube-vip:v0.6.3
    imagePullPolicy: IfNotPresent
    roleName: kube-vip-role
    roleBindingName: kube-vip-rolebinding
    # Customize the interface KubeVIP advertises on. When unset, KubeVIP will autodetect the interface.
    # interface: enp0s8
  # Relay allows us to listen and respond to layer broadcast DHCP requests
  relay:
    name: dhcp-relay
    enabled: false
    # This image (ghcr.io/jacobweinstock/dhcrelay) is used because the other public dhcprelay images out there (`modem7/dhcprelay`)
    # don't respect signals properly when run as PID 1.
    image: ghcr.io/jacobweinstock/dhcrelay
    maxHopCount: 10
    # sourceInterface is the Host/Node interface to use for listening for DHCP broadcast packets.
    # When unset, the interface from the default route will be used.
    # sourceInterface: eno1
    # TODO(jacobweinstock): add feature to be able to disable listening for broadcast traffic.

# -- Overrides
# The values defined here override those in the individual charts. Some of them require tweaking
# before deployment as they are environment dependent; others are surfaced for convenience.
#
# See individual chart documentation for additional detail.

smee:
  image: quay.io/tinkerbell/smee:v0.11.0
  tinkWorkerImage: quay.io/tinkerbell/tink-worker:v0.10.0
  trustedProxies: [10.42.0.0/24]
  publicIP: *publicIP
  additionlKernelArgs: &kernelArgs
    - "http_proxy=http://proxy-dmz.intel.com:911"
    - "https_proxy=http://proxy-dmz.intel.com:912"
    - "no_proxy=localhost,127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,.svc,.cluster.local,.svc.cluster.local,cdi-api,localhost,virt-api,*.intel.com,*intel.com,/var/run/docker.sock,/run/containerd/containerd.sock,172.22.32.0/22,172.22.33.51,172.22.33.237"
    - "HTTP_PROXY=http://proxy-dmz.intel.com:911"
    - "HTTPS_PROXY=http://proxy-dmz.intel.com:912"
    - "NO_PROXY=localhost,127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,.svc,.cluster.local,.svc.cluster.local,cdi-api,localhost,virt-api,*.intel.com,*intel.com,/var/run/docker.sock,/run/containerd/containerd.sock,172.22.32.0/22,172.22.33.51,172.22.33.237"
    - "load_balancer=172.22.32.200"
  service:
    enabled: true
    type: LoadBalancer
    class: kube-vip.io/kube-vip-class
    loadBalancerIP: *publicIP
  selector:
    app: smee
  http:
    # Tink Server configuration passed to the Tink Worker to establish a gRPC connection.
    tinkServer:
      ip: *publicIP
      port: 42113
      tls: false
    osieUrl:
      scheme: "http"
      host: *publicIP
      port: 8080
      path: ""
    additionlKernelArgs: *kernelArgs

hegel:
  image: quay.io/tinkerbell/hegel:v0.12.0
  trustedProxies: []

rufio:
  image: quay.io/tinkerbell/rufio:v0.3.3

tink:
  controller:
    image: quay.io/tinkerbell/tink-controller:v0.10.0
  server:
    image: quay.io/tinkerbell/tink:v0.10.0
